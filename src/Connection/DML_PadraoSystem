/*O objetivo deste arquivo é apenas guardar os comandos SQL para a criação
do banco de dados e das respectivas tabelas enquando não é feita uma verificação
na aplicação. A ideia é que assim que o programa for iniciado seja verificado a
existência do banco, em caso negativo tudo será criado do zero.*/

--DML PADRAOSYSTEM

--TABELA PASSWD
CREATE TABLE PASSWD (
	ID INT PRIMARY KEY NOT NULL IDENTITY (1,1),
	LOGIN VARCHAR(100) NOT NULL, 
	SENHA VARCHAR(256) NOT NULL, 
	DELET CHAR(1) NOT NULL)
	
	
--TABELA VERSION
CREATE TABLE VERSION (
	SYS_VERSION VARCHAR(5) NOT NULL)

--INICIAR CONTAGEM DA VERSÃO	
INSERT INTO VERSION (
	SYS_VERSION) VALUES 
	('0.01')
	
--CRIAR USUÁRIO ADMINISTRADOR E A SENHA Padrao#Dist@Pe2020
INSERT INTO PASSWD 
	(LOGIN, SENHA, DELET) VALUES 
	('ADMINISTRADOR', 'F03610CB8752CC8A5FD4DDEA380715A9D1E8DEFBE7FF99D64466C78B70474FA4', '')

--TABELA SETOR
CREATE TABLE SETOR (
	ID INT PRIMARY KEY NOT NULL IDENTITY (1,1),
	SETOR_NOME VARCHAR(20) NOT NULL, 
	DELET CHAR(1) NOT NULL)
	
--TABELA USUARIO
CREATE TABLE USUARIO (
	ID INT PRIMARY KEY NOT NULL IDENTITY (1,1),
	USER_NOME VARCHAR(20) NOT NULL,
	ID_SETOR INT NOT NULL,
	DELET CHAR(1) NOT NULL,
		CONSTRAINT FK_ID_USER FOREIGN KEY (ID_SETOR) REFERENCES SETOR (ID))

--TABELA COMPUTADOR
CREATE TABLE COMPUTADOR (
	ID INT NOT NULL IDENTITY (1,1),
	NUM_TOMBAMENTO VARCHAR(5) PRIMARY KEY NOT NULL, 
	PROCESSADOR VARCHAR(30) NOT NULL,
	MEMORIA VARCHAR(5) NOT NULL,
	HD VARCHAR(6) NOT NULL,
	SSD BIT NOT NULL,
	ID_USUARIO INT NOT NULL,
    DELET CHAR(1) NOT NULL,
		CONSTRAINT FK_ID_USUARIO FOREIGN KEY (ID_USUARIO) REFERENCES USUARIO (ID))	
		
--TABELA PATRIMONIO
CREATE TABLE PATRIMONIO (
	ID INT NOT NULL IDENTITY (1,1),
	NUM_TOMBAMENTO CHAR(5) PRIMARY KEY NOT NULL,
	DESCRICAO VARCHAR(100),
	MARCA VARCHAR(100),
	OBSERVACAO VARCHAR(100),
	ID_SETOR INT NOT NULL,
	ID_PC INT NOT NULL,
	DELET CHAR(1) NOT NULL)
	
	--TABELA MOVIMENTO
CREATE TABLE MOVIMENTO (
	ID INT NOT NULL IDENTITY (1,1),
	NUM_TOMB CHAR(5) NOT NULL,
	NOVO_NUM_TOMB CHAR(5) NOT NULL,
	SETOR_ANTIGO VARCHAR(20) NOT NULL,
	SETOR_NOVO VARCHAR(20) NOT NULL,
	DT_MUD DATE NOT NULL,
	)
